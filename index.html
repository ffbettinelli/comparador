<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O plano ideal - Hiper Gestão x Hiper Mini</title>
    <style>
        body {
            background-color: #f4f4f4;
            color: #333;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 10px;
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .content-wrap {
            flex: 1;
            padding: 0 10px;
             display: flex;
             flex-direction: column;
             justify-content: center;
             align-items: center;
        }

         #intro-container {
             max-width: 800px;
             margin: 30px auto;
             padding: 0;
             background-color: white;
             border-radius: 8px;
             box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
             text-align: left;
             color: #333;
             overflow: hidden;
         }

         .intro-title-bar {
             background-color: #4B0082;
             color: white;
             text-align: center;
             padding: 15px 20px;
             border-radius: 8px 8px 0 0;
             margin-bottom: 20px;
             margin-top: 0;
             margin-left: 0;
             margin-right: 0;
         }

         #intro-container h2 {
             color: white;
             margin: 0;
             font-size: 1.5em;
         }

         #intro-content {
             padding: 0 20px 20px 20px;
         }

         #intro-content h3 {
             color: #4B0082;
             margin-top: 0;
             margin-bottom: 15px;
             font-size: 1.2em;
         }


         #intro-container p {
             margin-bottom: 15px;
             line-height: 1.6;
         }

         #intro-container strong {
             color: #4B0082;
         }

         #intro-container ul {
             margin-bottom: 15px;
             padding-left: 20px;
         }

          #intro-container li {
              margin-bottom: 8px;
          }

          #intro-container a {
              color: #4B0082;
          }
           #intro-container a:hover {
               text-decoration: underline;
           }


         #intro-container .button-start {
             display: block;
             width: auto;
             margin: 20px auto 0 auto;
             background-color: #4B0082;
             color: white;
             padding: 15px 30px;
             font-size: 1.2em;
             border: none;
             border-radius: 8px;
             cursor: pointer;
             text-align: center;
             text-decoration: none;
         }

          #intro-container .button-start:hover {
              background-color: #3a0063;
          }

         #form-container {
             display: none;
             width: 100%;
         }


        h1 {
            background-color: #4B0082;
            color: white;
            text-align: center;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: block;
            width: 100%;
            box-sizing: border-box;
            font-size: 1.8em;
        }

        #completion-status {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1em;
            color: #4B0082;
            font-weight: bold;
            display: none;
        }

        #progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0;
            list-style: none;
            max-width: 800px;
            margin: 0 auto 20px;
            flex-wrap: wrap;
        }

        #progress-bar li {
            flex: 1;
            text-align: center;
            padding: 10px 5px;
            border-bottom: 3px solid #ddd;
            color: #777;
            position: relative;
            font-size: 0.9em;
        }

        #progress-bar li.active {
            border-bottom-color: #4B0082;
            color: #4B0082;
            font-weight: bold;
        }

        #progress-bar li:before {
            content: '';
            display: block;
            width: 20px;
            height: 20px;
            background-color: #ddd;
            border-radius: 50%;
            margin: 0 auto 5px;
        }

        #progress-bar li.active:before {
            background-color: #4B0082;
            color: white;
            content: attr(data-step);
            line-height: 20px;
        }

        form {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .etapa {
            display: none;
            flex-direction: column;
            gap: 15px;
        }

        .etapa.active {
            display: flex;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px;
        }

        label {
            font-weight: bold;
            margin-bottom: 6px;
            color: #4B0082;
            font-size: 1em;
        }

        input, select {
            padding: 8px;
            font-size: 1em;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 6px;
            color: #333;
            background-color: #fff;
        }

        input.is-invalid, select.is-invalid {
            border-color: red;
        }

        .error-message {
            color: red;
            font-size: 0.8em;
            margin-top: 4px;
        }


        .observacao {
            font-size: 0.8em;
            color: #777;
            margin-top: 4px;
        }

        .observacao::before {
            content: "ⓘ ";
            color: #4B0082;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-direction: column;
            gap: 10px;
        }

        .navigation-buttons button {
            background-color: #4B0082;
            color: white;
            padding: 10px 15px;
            font-size: 1em;
            border: none;
            cursor: pointer;
            border-radius: 6px;
            width: 100%;
        }

        .navigation-buttons button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #analisar-button {
            background-color: #4B0082;
            color: white;
            padding: 12px 15px;
            font-size: 1.1em;
            border: none;
            cursor: pointer;
            border-radius: 8px;
            margin-top: 20px;
            width: 100%;
        }

        #tela-final-container {
            display: none;
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
        }

        #dadosParaImpressao {
            width: 100%;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #fff;
            text-align: left;
            box-sizing: border-box;
        }

        #dadosParaImpressao h2 {
            color: #4B0082;
            margin-bottom: 10px;
            font-size: 1.5em;
            text-align: center;
        }

        #resultadoImpressao .plan-result {
            color: #4B0082;
            font-size: 1.8em;
            text-align: center;
            margin-top: 10px;
        }


        #dadosParaImpressao h3 {
            margin-bottom: 8px;
            font-size: 1.2em;
            color: #4B0082;
        }

        #resultadoImpressao p strong {
            color: #4B0082;
        }


        #dadosParaImpressao p {
            margin-bottom: 8px;
            font-size: 1em;
        }

        #dadosParaImpressao ul {
            padding-left: 20px;
            margin-bottom: 10px; /* Added for spacing */
        }

        #dadosParaImpressao li {
            margin-bottom: 5px;
        }

        /* Styling for cost details */
        #detalhamentoCustosImpressao ul {
            list-style-type: none; /* Remove bullets for cleaner look */
            padding-left: 0;
        }
        #detalhamentoCustosImpressao li {
            display: flex;
            justify-content: space-between;
            padding: 3px 0;
            border-bottom: 1px dashed #eee;
        }
         #detalhamentoCustosImpressao li:last-child {
            border-bottom: none;
        }
        #detalhamentoCustosImpressao strong { /* For Custo Total Estimado text */
            color: #4B0082; /* MODIFICADO: Era #333, agora é roxo */
        }
        #custoTotalPlano {
            color: #4B0082;
            font-weight: bold;
        }


        #acoes-finais-buttons {
            margin-top: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 10px;
             align-items: stretch;
        }

        #acoes-finais-buttons > button,
        #acoes-finais-buttons > a > button {
             flex: 1;
             min-width: 100px;
             background-color: #4B0082;
             color: white;
             padding: 10px 15px;
             font-size: 1em;
             border: none;
             border-radius: 6px;
             cursor: pointer;
             text-align: center;
             text-decoration: none;
        }


        #reiniciar-button:hover,
        #botaoImprimir:hover,
        #botaoWhatsapp:hover,
        #botaoSugestoes:hover {
            background-color: #3a0063;
        }

        #acoes-finais-buttons button:not(:first-child),
        #acoes-finais-buttons a:not(:first-child) button {
            margin-left: 0;
        }

         #acoes-finais-buttons a {
             display: contents;
         }


        footer {
            text-align: center;
            margin-top: 30px;
            padding: 15px 0;
            font-size: 0.8em;
            color: #6c757d;
            border-top: 1px solid #dee2e6;
            width: 100%;
            box-sizing: border-box;
        }
        footer p {
            margin: 0;
        }

        @media (min-width: 600px) {
            body {
                padding: 20px;
            }

            .content-wrap {
                 padding: 0 20px;
            }

            h1 {
                font-size: 2em;
                margin-bottom: 10px;
            }
            #completion-status {
                font-size: 1.2em;
            }

             #intro-container .intro-title-bar {
                 padding: 15px 20px;
             }

             #intro-container h2 {
                 font-size: 1.8em;
             }


             #intro-content h3 {
                 font-size: 1.4em;
             }


            #progress-bar li {
                padding: 10px;
                font-size: 1em;
            }

            form {
                padding: 30px;
                gap: 20px;
            }

            .etapa {
                 gap: 20px;
            }

            label {
                margin-bottom: 8px;
                font-size: 1.1em;
            }

            input, select {
                padding: 10px;
                font-size: 1em;
            }

            .observacao {
                font-size: 0.9em;
                margin-top: 6px;
            }

            .navigation-buttons {
                flex-direction: row;
                gap: 20px;
            }

            .navigation-buttons button {
                 width: auto;
            }

            #analisar-button {
                padding: 15px 20px;
                font-size: 1.2em;
                margin-top: 30px;
                width: auto;
            }

            #tela-final-container {
                margin: 30px auto 0 auto;
            }

            #dadosParaImpressao {
                padding: 20px;
            }

            #dadosParaImpressao h2 {
                font-size: 1.8em;
                margin-bottom: 15px;
            }

             #dadosParaImpressao h3 {
                 font-size: 1.4em;
             }

             #dadosParaImpressao p strong { /* This might be too general if you only want #resultadoImpressao p strong */
                 font-size: 1.1em;
             }
             #resultadoImpressao p strong { /* More specific */
                 color: #4B0082;
                 font-size: 1.1em;
             }


            #dadosParaImpressao p {
                margin-bottom: 10px;
                font-size: 1.1em;
            }

            #dadosParaImpressao ul {
                padding-left: 30px;
                 margin-bottom: 15px; /* Added for spacing */
            }
            #detalhamentoCustosImpressao ul { /* Override for costs list */
                padding-left: 0;
            }


            #acoes-finais-buttons {
                margin-top: 30px;
                flex-direction: row;
                justify-content: center;
                 gap: 10px;
                 align-items: center;
            }

             #acoes-finais-buttons button:not(:first-child),
             #acoes-finais-buttons a:not(:first-child) button {
                 margin-left: 10px;
             }

             #acoes-finais-buttons a:first-child button {
                 margin-left: 0;
             }

             #acoes-finais-buttons > button,
             #acoes-finais-buttons > a > button {
                 flex: 1;
                 min-width: 120px;
                 width: auto;
             }


            footer {
                margin-top: 50px;
                padding: 20px 0;
                font-size: 0.85em;
            }
        }

        @media (min-width: 1024px) {
             body {
                padding: 30px;
            }

             .content-wrap {
                 padding: 0 30px;
            }

            h1 {
                font-size: 2.2em;
            }
             #completion-status {
                font-size: 1.3em;
            }

             #intro-container .intro-title-bar {
                 padding: 15px 20px;
             }

             #intro-container h2 {
                 font-size: 2em;
             }

              #intro-content h3 {
                 font-size: 1.5em;
             }

             #dadosParaImpressao h3 { /* General h3 in this section */
                 font-size: 1.5em;
             }
              #resultadoImpressao p strong { /* Specific for result part */
                 font-size: 1.2em;
             }


             #dadosParaImpressao h2 {
                font-size: 2em;
            }


             #dadosParaImpressao p { /* General p in this section */
                font-size: 1.2em;
            }

            footer {
                font-size: 0.9em;
            }
        }

    </style>
</head>
<body>
    <div class="content-wrap">

        <div id="intro-container">
             <div class="intro-title-bar">
                 <h2>Bem-vindo(a) ao Comparador de Planos da Hiper</h2>
            </div>
             <div id="intro-content">
                <p>Aqui, vamos entender as necessidades do seu lead para lhe indicar a melhor solução Hiper de forma clara e objetiva.<br>Antes de começarmos, confira um resumo das opções disponíveis:</p>
                <h3>Conheça os Planos do Hiper, soluções para cada etapa do seu negócio</h3>
                <p><strong>Hiper Mini:</strong> É a versão de entrada, indicada para empresas que estão iniciando e precisam cumprir obrigações fiscais, como a emissão de NF-e ou NFC-e. Conta com funcionalidades mais limitadas: número reduzido de usuários, CNPJs, aplicativos e acesso ao Hiper Caixa (PDV). Inclui apenas 03 relatórios e não possui gestão financeira completa, apenas controle de contas a receber. É ideal para quem precisa do básico e exige pouco controle gerencial.</p>
                <p><strong>Hiper Gestão:</strong> É a versão mais completa, ideal para empresas que precisam de mais controle, organização e recursos. Permite operar com matriz, filiais e multiempresas, além de possibilitar expansão de usuários, integração com o Hiper Caixa (PDV) e uso de diversos aplicativos. Oferece gestão fiscal, de vendas, estoque e financeira de forma robusta, com acesso a mais de 50 relatórios.</p>
                <p><strong>Importante:</strong> Nos dois planos, os módulos Hiper Gestão (nuvem) e Hiper Loja são obrigatórios. Somente o Hiper Caixa (PDV) é opcional na contratação.</p>
                <p>Para mais detalhes, acesse o comparativo entre os planos Hiper Mini e Hiper Gestão <a href="https://ajuda.hiper.com.br/ajudahiper/s/article/Comparativo-entre-os-planos-Hiper-Mini-e-Hiper-Gest%C3%A3o" target="_blank">clicando aqui</a>.</p>
                <button type="button" class="button-start" id="iniciar-button">Iniciar</button>
            </div>
        </div>

        <div id="form-container">
            <h1>O plano ideal - Hiper Gestão x Hiper Mini</h1>
            <div id="completion-status">Progresso: <span id="progress-percentage">0</span>%</div>

            <ul id="progress-bar">
                <li class="active" data-step="1">Informações Gerais</li>
                <li data-step="2">Módulos e Funcionalidades</li>
                <li data-step="3">Detalhes Adicionais</li>
            </ul>
            <form id="planoForm">
                <div class="etapa active" id="etapa1">
                </div>
                <div class="etapa" id="etapa2">
                </div>
                <div class="etapa" id="etapa3">
                </div>
                <div class="navigation-buttons">
                    <button type="button" id="anterior" disabled>Anterior</button>
                    <button type="button" id="proximo">Próximo</button>
                </div>
                <button type="button" id="analisar-button" style="display: none;"><b>Analisar</b></button>
            </form>
        </div>


        <div id="tela-final-container" style="display: none;">
            <div id="dadosParaImpressao">
                <h2>Resumo da Análise</h2>
                <div id="selecoesImpressao">
                    </div>
                <div id="detalhamentoCustosImpressao">
                    <h3>Detalhamento de Custos:</h3>
                    <ul id="listaCustos">
                        </ul>
                    <p><strong>Custo Total Estimado: R$ <span id="custoTotalPlano">0.00</span></strong></p>
                </div>
                <div id="resultadoImpressao">
                     <h3>Resultado do Plano Ideal:</h3>
                     <h2 class="plan-result">Plano: <span id="resultadoPlano"></span></h2>
                     <p><strong>Motivos para esta sugestão:</strong> <span id="resultadoMotivos"></span></p>
                </div>
            </div>

            <div id="acoes-finais-buttons">
                <button type="button" id="reiniciar-button">Reiniciar</button>
                <button type="button" id="botaoImprimir" onclick="window.print()">Imprimir</button>
                <a id="linkWhatsapp" href="#" target="_blank" style="text-decoration: none;">
                    <button type="button" id="botaoWhatsapp">Enviar via WhatsApp</button> </a>
                 <a href="mailto:flavio.bettinelli@hiper.com.br" style="text-decoration: none;">
                    <button type="button" id="botaoSugestoes">Sugestões de Melhorias</button>
                </a>
            </div>
        </div>
    </div>
    <footer>
        <p>Desenvolvido pelo time de Partner Enablement da Hiper Software SA - 2025</p>
    </footer>

    <script>
        const formElement = document.getElementById('planoForm');
        const progressBar = document.getElementById('progress-bar');
        const etapas = document.querySelectorAll('.etapa');
        const botaoAnterior = document.getElementById('anterior');
        const botaoProximo = document.getElementById('proximo');
        const botaoAnalisar = document.getElementById('analisar-button');

        const telaFinalContainer = document.getElementById('tela-final-container');
        const dadosParaImpressaoDiv = document.getElementById('dadosParaImpressao');
        const selecoesImpressaoDiv = document.getElementById('selecoesImpressao');
        const listaCustosUl = document.getElementById('listaCustos'); // Elemento UL para os custos
        const custoTotalPlanoSpan = document.getElementById('custoTotalPlano'); // Span para o custo total
        const resultadoImpressaoDiv = document.getElementById('resultadoImpressao');
        const botaoReiniciar = document.getElementById('reiniciar-button');
        const linkWhatsapp = document.getElementById('linkWhatsapp');

        const resultadoPlanoSpan = document.getElementById('resultadoPlano');
        const resultadoMotivosSpan = document.getElementById('resultadoMotivos');

        const introContainer = document.getElementById('intro-container');
        const formContainer = document.getElementById('form-container');
        const iniciarButton = document.getElementById('iniciar-button');

        const completionStatusDiv = document.getElementById('completion-status');
        const progressPercentageSpan = document.getElementById('progress-percentage');
        let totalProgressFields = 0;
        let allFieldIds = [];


        let etapaAtual = 0;
        const camposPorEtapa = [
            ['filiais', 'regimeTributario', 'arquivosFiscais', 'usuarios'],
            ['pdv', 'lojaAdicional', 'hiperVendas', 'boletos', 'comissaoVendas', 'hiperConnection', 'gestaoPrecos'],
            ['imagensProdutos', 'mdfe', 'nfse', 'tef', 'servidorAdicional', 'varejoDigital', 'posConnect', 'qrpix']
        ];
        let analiseRealizada = false;

        const camposValidacao = {
            filiais: { required: true, min: 1, type: 'number' },
            regimeTributario: { required: true, type: 'select' },
            arquivosFiscais: { required: true, type: 'select' },
            usuarios: { required: true, min: 1, type: 'number' },
            pdv: { required: true, min: 0, type: 'number' },
            lojaAdicional: { required: true, min: 0, type: 'number' },
            hiperVendas: { required: true, type: 'select' },
            boletos: { required: true, type: 'select' },
            comissaoVendas: { required: true, type: 'select' },
            hiperConnection: { required: true, type: 'select' },
            gestaoPrecos: { required: true, type: 'select' },
            imagensProdutos: { required: true, type: 'select' },
            mdfe: { required: true, type: 'select' },
            nfse: { required: true, type: 'select' },
            tef: { required: true, min: 0, type: 'number' },
            servidorAdicional: { required: true, min: 0, type: 'number' },
            varejoDigital: { required: true, type: 'select' },
            posConnect: { required: true, min: 0, type: 'number' },
            qrpix: { required: true, min: 0, type: 'number' }
        };

        // --- DEFINIÇÃO DE CUSTOS ---
        const custos = {
            planos: {
                hiperGestao: 79.50,
                hiperMini: 36.00
            },
            usuarios: {
                precoPorUsuario: 8.00,
                limiteGratisMini: 1,
                maximoMini: 3,
                limiteGratisGestao: 4
            },
            filiais: {
                precoPorFilialAdicionalGestao: 60.50
            },
            pdv: { // Hiper Caixas
                precoMini: 19.00, // Para 1 caixa
                maximoMini: 1,
                precoGestao: 24.50 // Por caixa
            },
            hiperVendas: { nome: "Hiper Vendas", preco: 32.50, apenasGestao: true },
            boletos: { nome: "Boletos Bancários", preco: 30.50, apenasGestao: true },
            comissaoVendas: { nome: "Comissão de Vendas", preco: 0.00, apenasGestao: true },
            hiperConnection: { nome: "Hiper Connection", preco: 23.00, apenasGestao: true },
            gestaoPrecos: { nome: "Gestão de Preços (Tabelas)", preco: 0.00, apenasGestao: true },
            imagensProdutos: { nome: "Imagens de Produtos", preco: 14.50 },
            mdfe: { nome: "MDF-e", preco: 18.00 },
            nfse: { nome: "NFS-e", preco: 31.00 },
            arquivosFiscais: { nome: "Arquivos Fiscais", preco: 20.50 },
            tef: { // Custo por CNPJ que utiliza TEF
                nome: "Hiper TEF",
                precoPorCNPJ: 77.50
            },
            servidorAdicional: { // Hiper Loja (Servidor Adicional)
                nome: "Hiper Loja (Servidor Adicional)",
                precoPorUnidade: 23.00
            },
            varejoDigital: { nome: "Pacote Varejo Digital", preco: 30.00 },
            posConnect: { nome: "POS-Connect", precoPorLicenca: 0.00 },
            qrpix: { nome: "QR-PIX", precoPorPDV: 0.00 }
        };


        function updateCompletionStatus() {
            if (!allFieldIds.length) return;

            let filledCount = 0;
            allFieldIds.forEach(fieldId => {
                const element = document.getElementById(fieldId);
                if (element) {
                    if (element.tagName === 'SELECT') {
                        if (element.value !== "") {
                            filledCount++;
                        }
                    } else if (element.type === 'number') {
                        if (element.value.trim() !== "") {
                            filledCount++;
                        }
                    } else {
                        if (element.value.trim() !== "") {
                            filledCount++;
                        }
                    }
                }
            });

            const percentage = totalProgressFields > 0 ? Math.round((filledCount / totalProgressFields) * 100) : 0;
            progressPercentageSpan.textContent = percentage;
        }


        function mostrarEtapa(numeroEtapa) {
            etapas.forEach((etapa, indice) => {
                etapa.classList.toggle('active', indice === numeroEtapa);
            });
            progressBar.querySelectorAll('li').forEach((item, indice) => {
                item.classList.toggle('active', indice <= numeroEtapa);
            });
            botaoAnterior.disabled = numeroEtapa === 0;
            botaoProximo.style.display = numeroEtapa === etapas.length - 1 ? 'none' : 'inline-block';
            botaoAnalisar.style.display = numeroEtapa === etapas.length - 1 ? 'inline-block' : 'none';
        }

        function validarEtapa(numeroEtapa) {
            const camposDaEtapa = camposPorEtapa[numeroEtapa];
            let todosValidos = true;
            const mensagensErroDaEtapa = [];

             camposDaEtapa.forEach(campoId => {
                const elemento = document.getElementById(campoId);
                if (elemento) {
                    elemento.classList.remove('is-invalid');
                    const errorElement = elemento.parentElement.querySelector('.error-message');
                    if (errorElement) {
                        errorElement.textContent = '';
                    }
                }
            });

            camposDaEtapa.forEach(campoId => {
                const elemento = document.getElementById(campoId);
                const validacao = camposValidacao[campoId];
                const campoInfo = campos.find(c => c.id === campoId);

                if (!elemento || !validacao) {
                    console.warn(`Validação não definida para o campo: ${campoId}`);
                    return;
                }

                const label = campoInfo ? campoInfo.label : campoId;
                let campoValido = true;

                if (validacao.required) {
                    if (elemento.tagName === 'SELECT') {
                        if (elemento.value === '') {
                            mensagensErroDaEtapa.push({ campoId: campoId, mensagem: `Selecione uma opção para "${label}".` });
                            campoValido = false;
                        }
                    } else if (elemento.type === 'number') {
                        const valorString = elemento.value.trim();
                        const valor = parseInt(valorString);

                         if (valorString.length > 1 && valorString.startsWith('0') && valorString !== '0') {
                            mensagensErroDaEtapa.push({ campoId: campoId, mensagem: `O campo "${label}" não pode ter zeros à esquerda (exceto se for apenas '0').` });
                            campoValido = false;
                        }
                        else if (valorString !== '' && /\./.test(valorString)) {
                            mensagensErroDaEtapa.push({ campoId: campoId, mensagem: `O campo "${label}" não pode conter casas decimais.` });
                            campoValido = false;
                        }
                        else if (valorString === '' || isNaN(valor) || (validacao.min !== undefined && valor < validacao.min)) {
                             if (validacao.min !== undefined && validacao.min > 0) {
                                 mensagensErroDaEtapa.push({ campoId: campoId, mensagem: `O campo "${label}" precisa ser um número inteiro maior que 0.` });
                             } else {
                                  mensagensErroDaEtapa.push({ campoId: campoId, mensagem: `O campo "${label}" precisa ser um número inteiro maior ou igual a 0.` });
                             }
                            campoValido = false;
                        }
                    } else {
                        if (elemento.value.trim() === '') {
                            mensagensErroDaEtapa.push({ campoId: campoId, mensagem: `O campo "${label}" é obrigatório.` });
                            campoValido = false;
                        }
                    }
                }

                if (!campoValido) {
                    elemento.classList.add('is-invalid');
                    todosValidos = false;
                }
            });

            if (numeroEtapa === 0) {
                const regimeTributarioElem = document.getElementById('regimeTributario');
                const arquivosFiscaisElem = document.getElementById('arquivosFiscais');
                if (regimeTributarioElem && arquivosFiscaisElem &&
                    regimeTributarioElem.value === 'regime_normal_lucro_real_ou_presumido' &&
                    arquivosFiscaisElem.value === 'sim') {
                     const mensagemErro = 'O Hiper não gera arquivo de SPED para o Regime Normal (Lucro Real ou Presumido), essa opção é somente para o Simples Nacional.';
                     regimeTributarioElem.classList.add('is-invalid');
                     let errorRegime = regimeTributarioElem.parentElement.querySelector('.error-message');
                     if (errorRegime) errorRegime.textContent = mensagemErro;
                     arquivosFiscaisElem.classList.add('is-invalid');
                     let errorArquivos = arquivosFiscaisElem.parentElement.querySelector('.error-message');
                     if (errorArquivos) errorArquivos.textContent = mensagemErro;
                     todosValidos = false;
                }
            }

            if (numeroEtapa === 2) {
                const imagensProdutosElem = document.getElementById('imagensProdutos');
                const varejoDigitalElem = document.getElementById('varejoDigital');
                if (imagensProdutosElem && varejoDigitalElem) {
                    const imagensProdutosSelecionado = imagensProdutosElem.value;
                    const varejoDigitalSelecionado = varejoDigitalElem.value;
                    if (imagensProdutosSelecionado === 'sim' && varejoDigitalSelecionado === 'sim') {
                         mensagensErroDaEtapa.push({ campoId: 'imagensProdutos', mensagem: 'Conflito: Já incluído no Pacote Varejo Digital.' });
                         mensagensErroDaEtapa.push({ campoId: 'varejoDigital', mensagem: 'Conflito: Já inclui Imagens de Produtos.' });
                        imagensProdutosElem.classList.add('is-invalid');
                        varejoDigitalElem.classList.add('is-invalid');
                        todosValidos = false;
                    }
                }
            }

            mensagensErroDaEtapa.forEach(erro => {
                const elemento = document.getElementById(erro.campoId);
                if (elemento) {
                    let errorElement = elemento.parentElement.querySelector('.error-message');
                    if (!errorElement) {
                        errorElement = document.createElement('p');
                        errorElement.classList.add('error-message');
                        elemento.parentElement.appendChild(errorElement);
                    }
                    errorElement.textContent = erro.mensagem;
                }
            });
            return todosValidos;
        }


        function navegarEtapa(direcao) {
            if (direcao === 1) {
                if (!validarEtapa(etapaAtual)) {
                    return;
                }
            }
            etapaAtual += direcao;
            if (etapaAtual >= 0 && etapaAtual < etapas.length) {
                mostrarEtapa(etapaAtual);
            } else {
                 if (etapaAtual >= etapas.length) {
                     if (validarEtapa(etapas.length - 1)) {
                         // Não chama verificarPlanoFinalizado aqui, espera o botão Analisar
                     } else {
                          etapaAtual = etapas.length - 1;
                          mostrarEtapa(etapaAtual);
                     }
                 }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            introContainer.style.display = 'block';
            formContainer.style.display = 'none';
            telaFinalContainer.style.display = 'none';
            completionStatusDiv.style.display = 'none';

            allFieldIds = campos.map(c => c.id);
            totalProgressFields = allFieldIds.length;

            camposPorEtapa.forEach((camposDaEtapa, indiceEtapa) => {
                const etapaDiv = document.getElementById(`etapa${indiceEtapa + 1}`);
                camposDaEtapa.forEach(campoId => {
                    const campoInfo = campos.find(c => c.id === campoId);
                    if (campoInfo) {
                        const div = document.createElement('div');
                        div.className = 'form-group';
                        div.innerHTML = `<label for="${campoInfo.id}">${campoInfo.label}</label>`;
                        let fieldElement;
                        if (campoInfo.tipo === 'select') {
                            const select = document.createElement('select');
                            select.id = campoInfo.id;
                            const placeholderOption = document.createElement('option');
                            placeholderOption.value = "";
                            placeholderOption.text = "Selecione...";
                            placeholderOption.disabled = true;
                            placeholderOption.selected = true;
                            select.appendChild(placeholderOption);
                            campoInfo.opcoes.forEach(op => {
                                const option = document.createElement('option');
                                option.value = op.toLowerCase().replace(/\s+/g, '_').replace(/[^\w-]+/g, '');
                                option.text = op;
                                select.appendChild(option);
                            });
                            div.appendChild(select);
                            fieldElement = select;
                        } else {
                            const input = document.createElement('input');
                            input.type = campoInfo.tipo;
                            input.id = campoInfo.id;
                            if (campoInfo.tipo === 'number') {
                                input.min = camposValidacao[campoId]?.min || 0;
                                input.step = '1';
                            }
                            div.appendChild(input);
                            fieldElement = input;
                        }

                        if (fieldElement) {
                            fieldElement.addEventListener('change', updateCompletionStatus);
                            if (fieldElement.type === 'number') {
                                fieldElement.addEventListener('input', updateCompletionStatus);
                            }
                        }

                        if (campoInfo.obs) {
                            const p = document.createElement('p');
                            p.className = 'observacao';
                            p.innerHTML = campoInfo.obs;
                            div.appendChild(p);
                        }
                        const errorPlaceholder = document.createElement('p');
                        errorPlaceholder.classList.add('error-message');
                        div.appendChild(errorPlaceholder);
                        etapaDiv.appendChild(div);
                    }
                });
            });

             iniciarButton.addEventListener('click', () => {
                 introContainer.style.display = 'none';
                 formContainer.style.display = 'block';
                 progressBar.style.display = 'flex';
                 document.querySelector('h1').style.display = 'block';
                 completionStatusDiv.style.display = 'block';
                 etapaAtual = 0;
                 mostrarEtapa(etapaAtual);
                 updateCompletionStatus();
             });
        });

        botaoAnterior.addEventListener('click', () => navegarEtapa(-1));
        botaoProximo.addEventListener('click', () => navegarEtapa(1));
        botaoAnalisar.addEventListener('click', () => {
            let todosValidosGeral = true;
             for(let i = 0; i < etapas.length; i++) {
                 camposPorEtapa[i].forEach(campoId => {
                    const elemento = document.getElementById(campoId);
                    if (elemento) {
                        elemento.classList.remove('is-invalid');
                         const errorElement = elemento.parentElement.querySelector('.error-message');
                         if (errorElement) errorElement.textContent = '';
                    }
                 });
            }
             for(let i = 0; i < etapas.length; i++) {
                 if (!validarEtapa(i)) {
                     todosValidosGeral = false;
                 }
             }
             if (!todosValidosGeral) {
                let primeiraEtapaComErro = -1;
                 for(let i = 0; i < etapas.length; i++) {
                     const camposDaEtapa = camposPorEtapa[i];
                     const etapaTemErro = camposDaEtapa.some(campoId => {
                        const elemento = document.getElementById(campoId);
                        return elemento && elemento.classList.contains('is-invalid');
                     });
                     if (etapaTemErro) {
                         primeiraEtapaComErro = i;
                         break;
                     }
                 }
                 if (primeiraEtapaComErro !== -1) {
                     mostrarEtapa(primeiraEtapaComErro);
                     etapaAtual = primeiraEtapaComErro;
                 } else {
                     mostrarEtapa(etapas.length - 1);
                     etapaAtual = etapas.length - 1;
                 }
                 return;
             }
            verificarPlanoFinalizado();
        });
        botaoReiniciar.addEventListener('click', reiniciarFormulario);

        function verificarPlanoFinalizado() {
            if (analiseRealizada) return;

            const selecoesParaHTML = {};
            const selecoesParaWhatsapp = [];
            campos.forEach(campo => {
                const elemento = document.getElementById(campo.id);
                if (elemento) {
                    const label = campo.label;
                    let valorDisplay = elemento.value;
                    let valorWhatsapp = elemento.value;
                    if (elemento.tagName === 'SELECT') {
                        const selectedOption = elemento.options[elemento.selectedIndex];
                        valorDisplay = selectedOption ? selectedOption.text : elemento.value;
                        valorWhatsapp = selectedOption ? selectedOption.text : elemento.value;
                         if (elemento.value === '') {
                             valorDisplay = 'Não informado';
                             valorWhatsapp = 'Não informado';
                         }
                    } else if (elemento.type === 'number') {
                         const valorString = elemento.value.trim();
                         if (valorString === '') {
                              valorDisplay = '0'; // Default to 0 if empty for consistency in display
                              valorWhatsapp = '0';
                         } else {
                              valorDisplay = valorString;
                              valorWhatsapp = valorString;
                         }
                    } else {
                         valorDisplay = elemento.value || 'Não informado';
                         valorWhatsapp = elemento.value || 'Não informado';
                    }
                    selecoesParaHTML[label] = valorDisplay;
                    selecoesParaWhatsapp.push(`- ${label}: ${valorWhatsapp}`);
                }
            });

            const numFiliaisInput = parseInt(document.getElementById('filiais').value) || 1;
            const numUsuariosInput = parseInt(document.getElementById('usuarios').value) || 0;
            const numPdvInput = parseInt(document.getElementById('pdv').value) || 0;

            let plano = "Hiper Mini";
            let motivos = [];

            // Lógica de determinação do plano (já existente, mas revisada para clareza)
            if (numFiliaisInput > 1) { motivos.push("Mais de uma filial"); plano = "Hiper Gestão"; }
            if (numUsuariosInput > custos.usuarios.maximoMini) { motivos.push(`Mais de ${custos.usuarios.maximoMini} usuários`); plano = "Hiper Gestão"; }
            if (numPdvInput > custos.pdv.maximoMini) { motivos.push(`Mais de ${custos.pdv.maximoMini} PDV (Hiper Caixa)`); plano = "Hiper Gestão"; }
            if (document.getElementById('hiperVendas').value === "sim") { motivos.push("Uso do Hiper Vendas"); plano = "Hiper Gestão"; }
            if (document.getElementById('boletos').value === "sim") { motivos.push("Emissão de boletos"); plano = "Hiper Gestão"; }
            if (document.getElementById('comissaoVendas').value === "sim") { motivos.push("Comissão de vendas"); plano = "Hiper Gestão"; }
            if (document.getElementById('hiperConnection').value === "sim") { motivos.push("Uso do Hiper Connection"); plano = "Hiper Gestão"; }
            if (document.getElementById('gestaoPrecos').value === "sim") { motivos.push("Gestão de preços (tabelas)"); plano = "Hiper Gestão"; }


            // --- CÁLCULO DE CUSTOS ---
            let custoTotal = 0;
            const detalhamentoCustos = [];

            // 1. Custo Base do Plano
            if (plano === "Hiper Gestão") {
                custoTotal += custos.planos.hiperGestao;
                detalhamentoCustos.push({ item: "Plano Hiper Gestão (Base)", valor: custos.planos.hiperGestao });
            } else { // Hiper Mini
                custoTotal += custos.planos.hiperMini;
                detalhamentoCustos.push({ item: "Plano Hiper Mini (Base)", valor: custos.planos.hiperMini });
            }

            // 2. Custo de Usuários
            let custoUsuarios = 0;
            let usuariosCobraveisDetalhe = "";
            if (plano === "Hiper Gestão") {
                if (numUsuariosInput > custos.usuarios.limiteGratisGestao) {
                    const usuariosExcedentes = numUsuariosInput - custos.usuarios.limiteGratisGestao;
                    custoUsuarios = usuariosExcedentes * custos.usuarios.precoPorUsuario;
                    usuariosCobraveisDetalhe = `${usuariosExcedentes} excedente(s) (acima de ${custos.usuarios.limiteGratisGestao} grátis)`;
                } else if (numUsuariosInput > 0) {
                     usuariosCobraveisDetalhe = `${numUsuariosInput} (incluso(s))`;
                }
            } else { // Hiper Mini
                if (numUsuariosInput > custos.usuarios.limiteGratisMini) {
                    // A lógica de motivos já deve ter mudado para Gestão se numUsuariosInput > maximoMini
                    const usuariosCobraveisMini = Math.min(numUsuariosInput, custos.usuarios.maximoMini) - custos.usuarios.limiteGratisMini;
                    if (usuariosCobraveisMini > 0) {
                        custoUsuarios = usuariosCobraveisMini * custos.usuarios.precoPorUsuario;
                        usuariosCobraveisDetalhe = `${usuariosCobraveisMini} excedente(s) (acima de ${custos.usuarios.limiteGratisMini} grátis)`;
                    }
                } else if (numUsuariosInput > 0) {
                    usuariosCobraveisDetalhe = `${numUsuariosInput} (incluso(s))`;
                }
            }
            if (custoUsuarios > 0) {
                custoTotal += custoUsuarios;
                detalhamentoCustos.push({ item: `Usuários: ${usuariosCobraveisDetalhe}`, valor: custoUsuarios });
            } else if (numUsuariosInput > 0) { // Mesmo se gratuito, listar
                 detalhamentoCustos.push({ item: `Usuários: ${usuariosCobraveisDetalhe}`, valor: 0.00 });
            }


            // 3. Custo de Filiais
            let custoFiliais = 0;
            if (plano === "Hiper Gestão" && numFiliaisInput > 1) {
                const filiaisAdicionais = numFiliaisInput - 1;
                custoFiliais = filiaisAdicionais * custos.filiais.precoPorFilialAdicionalGestao;
                custoTotal += custoFiliais;
                detalhamentoCustos.push({ item: `Filial(is) Adicional(is): ${filiaisAdicionais}`, valor: custoFiliais });
            }

            // 4. Custo de Hiper Caixas (PDV)
            let custoPdv = 0;
            if (numPdvInput > 0) {
                if (plano === "Hiper Gestão") {
                    custoPdv = numPdvInput * custos.pdv.precoGestao;
                    detalhamentoCustos.push({ item: `Hiper Caixa(s) (PDV): ${numPdvInput}`, valor: custoPdv });
                } else { // Hiper Mini
                    if (numPdvInput === 1) { // Apenas 1 PDV permitido e cobrado no Mini
                        custoPdv = custos.pdv.precoMini;
                        detalhamentoCustos.push({ item: `Hiper Caixa (PDV): ${numPdvInput}`, valor: custoPdv });
                    }
                    // Se numPdvInput > 1 no Mini, a lógica de motivos já deve ter trocado o plano.
                }
                if (custoPdv > 0) custoTotal += custoPdv;
            }

            // 5. Itens de Seleção (Sim/Não ou Quantidade)
            const varejoDigitalSelecionado = document.getElementById('varejoDigital').value === 'sim';

            const itensConfig = [
                { id: 'hiperVendas', config: custos.hiperVendas, tipo: 'select' },
                { id: 'boletos', config: custos.boletos, tipo: 'select' },
                { id: 'comissaoVendas', config: custos.comissaoVendas, tipo: 'select' },
                { id: 'hiperConnection', config: custos.hiperConnection, tipo: 'select' },
                { id: 'gestaoPrecos', config: custos.gestaoPrecos, tipo: 'select' },
                { id: 'imagensProdutos', config: custos.imagensProdutos, tipo: 'select' },
                { id: 'mdfe', config: custos.mdfe, tipo: 'select' },
                { id: 'nfse', config: custos.nfse, tipo: 'select' },
                { id: 'arquivosFiscais', config: custos.arquivosFiscais, tipo: 'select' },
                { id: 'varejoDigital', config: custos.varejoDigital, tipo: 'select' },
                { id: 'servidorAdicional', config: custos.servidorAdicional, tipo: 'number', idValor: 'servidorAdicional' },
                { id: 'tef', config: custos.tef, tipo: 'number_special', idValor: 'tef' }, // Special handling for TEF
                { id: 'posConnect', config: custos.posConnect, tipo: 'number', idValor: 'posConnect' },
                { id: 'qrpix', config: custos.qrpix, tipo: 'number', idValor: 'qrpix'}
            ];

            itensConfig.forEach(item => {
                const elemento = document.getElementById(item.id);
                let selecionadoOuQuantidade = 0;
                let deveAdicionarCusto = false;
                let custoItem = 0;
                let detalheItem = item.config.nome;

                if (item.tipo === 'select') {
                    if (elemento.value === 'sim') {
                        selecionadoOuQuantidade = 1; // represent 'sim'
                        deveAdicionarCusto = true;
                        custoItem = item.config.preco;
                    }
                } else if (item.tipo === 'number') {
                    selecionadoOuQuantidade = parseInt(elemento.value) || 0;
                    if (selecionadoOuQuantidade > 0) {
                        deveAdicionarCusto = true;
                        if (item.id === 'servidorAdicional') {
                            custoItem = selecionadoOuQuantidade * item.config.precoPorUnidade;
                            detalheItem = `${item.config.nome}: ${selecionadoOuQuantidade}`;
                        } else if (item.id === 'posConnect') {
                             custoItem = selecionadoOuQuantidade * item.config.precoPorLicenca; // Será 0
                             detalheItem = `${item.config.nome}: ${selecionadoOuQuantidade} licença(s)`;
                        } else if (item.id === 'qrpix') {
                            const qrPixConsiderados = Math.min(selecionadoOuQuantidade, numPdvInput);
                             if (qrPixConsiderados > 0) {
                                custoItem = qrPixConsiderados * item.config.precoPorPDV; // Será 0
                                detalheItem = `${item.config.nome}: ${qrPixConsiderados} PDV(s)`;
                             } else {
                                deveAdicionarCusto = false; // Não adiciona se não houver PDVs ou QR PIX para eles
                             }
                        }
                    }
                } else if (item.tipo === 'number_special' && item.id === 'tef') {
                    selecionadoOuQuantidade = parseInt(elemento.value) || 0;
                    if (selecionadoOuQuantidade > 0) { // Usuário quer TEF
                        deveAdicionarCusto = true;
                        if (plano === "Hiper Gestão") {
                            custoItem = numFiliaisInput * item.config.precoPorCNPJ;
                            detalheItem = `${item.config.nome} (${numFiliaisInput} CNPJ(s))`;
                        } else { // Hiper Mini
                            custoItem = item.config.precoPorCNPJ;
                            detalheItem = `${item.config.nome} (1 CNPJ)`;
                        }
                    }
                }

                if (deveAdicionarCusto) {
                    if (item.config.apenasGestao && plano !== "Hiper Gestão") {
                        // Este item não deveria estar disponível ou seu custo não se aplica ao Mini.
                        // A lógica de mudança de plano já deve ter tratado isso.
                        return; // Não adiciona custo
                    }

                    // Regra especial: Imagens de Produtos x Pacote Varejo Digital
                    if (item.id === 'imagensProdutos' && varejoDigitalSelecionado) {
                        detalhamentoCustos.push({ item: `${item.config.nome} (Incluso no Pacote Varejo Digital)`, valor: 0.00 });
                        return; // Não adiciona custo separado
                    }
                     if (item.id === 'varejoDigital' && item.config.preco > 0 && document.getElementById('imagensProdutos').value === 'sim' && !varejoDigitalSelecionado) {
                        // Se Varejo Digital não foi selecionado, mas Imagens sim, o custo de Imagens já foi pego acima.
                        // Esta condição é mais para o caso de Varejo Digital estar sendo processado.
                    }


                    custoTotal += custoItem;
                    detalhamentoCustos.push({ item: detalheItem, valor: custoItem });
                }
            });


            // --- ATUALIZAR TELA FINAL ---
            formElement.style.display = 'none';
            progressBar.style.display = 'none';
            document.querySelector('h1').style.display = 'none';
            completionStatusDiv.style.display = 'none';

            // Seleções
            let htmlSelecoes = '<h3>Suas Seleções:</h3><ul>';
            for (const key in selecoesParaHTML) {
                htmlSelecoes += `<li><strong>${key}:</strong> ${selecoesParaHTML[key]}</li>`;
            }
            htmlSelecoes += '</ul>';
            selecoesImpressaoDiv.innerHTML = htmlSelecoes;

            // Custos
            listaCustosUl.innerHTML = ''; // Limpar lista anterior
            detalhamentoCustos.forEach(custoItem => {
                const li = document.createElement('li');
                const itemSpan = document.createElement('span');
                itemSpan.textContent = custoItem.item;
                const valorSpan = document.createElement('span');
                valorSpan.textContent = `R$ ${custoItem.valor.toFixed(2)}`;
                li.appendChild(itemSpan);
                li.appendChild(valorSpan);
                listaCustosUl.appendChild(li);
            });
            custoTotalPlanoSpan.textContent = custoTotal.toFixed(2);

            // Resultado
            resultadoPlanoSpan.textContent = plano;
            resultadoMotivosSpan.textContent = motivos.length > 0 ? motivos.join(', ') : 'Atende aos requisitos do plano Hiper Mini sem necessidade de funcionalidades exclusivas do Hiper Gestão ou configurações que excedam os limites do Mini.';


            // --- MENSAGEM WHATSAPP ---
            let mensagemWhatsappTexto = "*Resumo da Análise do Plano Ideal Hiper*\n\n";
            mensagemWhatsappTexto += "*Suas Seleções:*\n";
            mensagemWhatsappTexto += selecoesParaWhatsapp.join('\n') + "\n\n";

            mensagemWhatsappTexto += "*Detalhamento de Custos Estimados:*\n";
            detalhamentoCustos.forEach(custoItem => {
                mensagemWhatsappTexto += `- ${custoItem.item}: R$ ${custoItem.valor.toFixed(2)}\n`;
            });
            mensagemWhatsappTexto += `*Custo Total Estimado: R$ ${custoTotal.toFixed(2)}*\n\n`;

            mensagemWhatsappTexto += "*Resultado da Análise:*\n";
            mensagemWhatsappTexto += `- *Plano Ideal Sugerido:* ${plano}\n`;
            mensagemWhatsappTexto += `- *Motivos:* ${resultadoMotivosSpan.textContent}\n\n`;

            const mensagemBaseWhatsapp = "Olá! Segue o plano ideal para contratação, conforme análise:\n\n";
            const mensagemCompletaWhatsapp = mensagemBaseWhatsapp + mensagemWhatsappTexto;

            const textoCodificado = encodeURIComponent(mensagemCompletaWhatsapp);
            let urlWhatsappFinal;
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            if (isMobile) {
                urlWhatsappFinal = `whatsapp://send?text=${textoCodificado}`;
            } else {
                urlWhatsappFinal = `https://api.whatsapp.com/send?text=${textoCodificado}`;
            }
            linkWhatsapp.href = urlWhatsappFinal;

            telaFinalContainer.style.display = 'block';
            analiseRealizada = true;
        }

        function reiniciarFormulario() {
            introContainer.style.display = 'block';
            formContainer.style.display = 'none';
            progressBar.style.display = 'none';
            document.querySelector('h1').style.display = 'none';
            telaFinalContainer.style.display = 'none';
            completionStatusDiv.style.display = 'none';

            etapaAtual = 0;
            mostrarEtapa(etapaAtual);
            formElement.reset();

             campos.forEach(campo => {
                const elemento = document.getElementById(campo.id);
                if (elemento) {
                    elemento.classList.remove('is-invalid');
                    const errorElement = elemento.parentElement.querySelector('.error-message');
                    if (errorElement) {
                        errorElement.textContent = '';
                    }
                    if (elemento.tagName === 'SELECT') {
                        elemento.value = ""; // Reseta para o placeholder
                        // O placeholder já é selected e disabled, então reset deve funcionar.
                        // Se não, forçar o selectedIndex para o placeholder se ele for o primeiro:
                        if (elemento.options.length > 0 && elemento.options[0].disabled) {
                           elemento.selectedIndex = 0;
                        }
                    }
                }
             });
            analiseRealizada = false;
            updateCompletionStatus();
            listaCustosUl.innerHTML = ''; // Limpar custos da tela final
            custoTotalPlanoSpan.textContent = '0.00';
        }

        const campos = [
            { id: 'filiais', label: 'Filiais', tipo: 'number', obs: 'Quantidade de empresas com CNPJ que irão usar o Hiper.' },
            { id: 'regimeTributario', label: 'Regime Tributário', tipo: 'select', opcoes: ['Simples Nacional', 'Regime Normal (Lucro Real ou Presumido)'], obs: 'No Regime Normal, não geramos o arquivo de SPED via Arquivos Fiscais, mas o cliente poderá baixar os arquivos .XML das Notas Fiscais Eletrônicas.' },
            { id: 'arquivosFiscais', label: 'Arquivos Fiscais', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Emissão de arquivo do SPED, apenas para o Simples Nacional nos perfis A, B e C.' },
            { id: 'usuarios', label: 'Usuários', tipo: 'number', obs: 'Quantidade de pessoas que estarão manuseando o Hiper.' },
            { id: 'pdv', label: 'Hiper Caixa (PDV)', tipo: 'number', obs: 'Quantidade de computadores que irão emitir ECF, NFC-e, CF-e e MF-e.' },
            { id: 'lojaAdicional', label: 'Hiper Loja Adicional', tipo: 'number', obs: 'Quantidade de computadores que estarão usando o Hiper Loja além do servidor (Terminais).' },
            { id: 'hiperVendas', label: 'Hiper Vendas', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'App para emissão de pedidos fora do estabelecimento. Para uma boa gestão, ampliar a quantidade de usuários de acordo com a quantidade de smartphones que farão o uso do App. Disponível na <a href="https://play.google.com/store/apps/details?id=br.com.gohiper.hipervendas&pcampaignid=web_share" target="_blank">PlayStore</a>.' },
            { id: 'boletos', label: 'Boletos', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Emissão de boletos com arquivo de remessa e retorno. Funciona apenas com os bancos homologados de acordo com a <a href="https://ajuda.hiper.com.br/ajudahiper/s/article/Bancos-homologados-para-emiss%C3%A3o-de-boletos-no-Hiper" target="_blank">central de ajuda</a>. Se for utilizar a conta digital da Stone, não contrate esta opção.' },
            { id: 'comissaoVendas', label: 'Comissão de Vendas', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Permite o controle da comissão de vendas para os vendedores.' },
            { id: 'hiperConnection', label: 'Hiper Connection', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Libera a integração entre ERP de terceiros com o Hiper (Hiper Loja e Hiper Caixa), através de arquivos .TXT.' },
            { id: 'gestaoPrecos', label: 'Gestão de Preços (Tabelas)', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Permite o uso de tabelas de preço nos pedidos e nas vendas em geral.' },
            { id: 'imagensProdutos', label: 'Imagens de Produtos', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Permite inserir imagem no cadastro de produto. Caso o cliente utilize o Pacote Varejo Digital, não contrate esta opção.' },
            { id: 'mdfe', label: 'MDF-e', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Permite a emissão do Manifesto de Cargas no Hiper Gestão.'  },
            { id: 'nfse', label: 'NFS-e', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Permite a emissão de NFS-e no Hiper Gestão. Verificar se a cidade está integrada <a href="https://www.google.com/maps/d/u/0/viewer?mid=1gVaqU3tUa0Ll7ngjHD79cfKDCeA&ll=-14.199246408076363%2C-55.94937748457026&z=4" target="_blank">aqui</a>.' },
            { id: 'tef', label: 'Hiper TEF', tipo: 'number', obs: 'Quantidade de Pinpads por CNPJ, não por máquinas ou Hiper Caixa (PDV). O custo é por CNPJ que utilizará o TEF.' },
            { id: 'servidorAdicional', label: 'Hiper Loja (Servidor Adicional)', tipo: 'number', obs: 'Informar a quantidade de servidores adicionais além do principal.' },
            { id: 'varejoDigital', label: 'Pacote Varejo Digital', tipo: 'select', opcoes: ['Não', 'Sim'], obs: 'Libera integração com Mercado Livre, Catálogo Digital e E-commerce.' },
            { id: 'posConnect', label: 'Pos-Connect', tipo: 'number', obs: 'Integração do POS da Stone com o Hiper Caixa (PDV). Licença por maquininha.' },
            { id: 'qrpix', label: 'QR-PIX', tipo: 'number', obs: 'Libera o QR-CODE do PIX no Hiper Caixa (PDV). Informar a quantidade de Hiper Caixa (PDV) que irá utilizar a integração.' }
        ];
    </script>
</body>
</html>